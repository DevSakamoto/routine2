<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>ãƒãƒ¬ãƒ¼ğŸ</title>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <!-- è‡ªä½œ CSS -->
  <link rel="stylesheet" href="style.css">

</head>

<body>
  <div class="container-fluid">
    <div class ="hideInPrint">
    <h3>ãƒãƒ¬ãƒ¼ğŸ </h3>
    <a href="#Pageèª¬æ˜" data-toggle="collapse">Pageèª¬æ˜</a>
    <div id="Pageèª¬æ˜" class="collapse">
      <div class="border" style="padding:10px;">
        <b>åå‰</b>ã€<b>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åˆè¨ˆ</b>ã€‘<br>
        <b>èª¬æ˜</b>ï¼ˆãƒ¡ãƒ³ãƒãƒ¼å›ºæœ‰ã®èª¬æ˜æ–‡ï¼‰<br>
        <b>ãƒ¬ã‚·ãƒ¼ãƒ–</b>ï¼šãƒ‡ã‚£ã‚°ã®ä¸Šæ‰‹ã•ï¼ˆå®‰å®šæ„Ÿã€ç²¾åº¦ï¼‰<br>
        <b>ãƒˆã‚¹</b>ï¼šãƒˆã‚¹ãƒ»ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®ä¸Šæ‰‹ã•ï¼ˆå®‰å®šæ„Ÿã€ç²¾åº¦ï¼‰<br>
        <b>ã‚¹ãƒ‘ã‚¤ã‚¯</b>ï¼šã‚¹ãƒ‘ã‚¤ã‚¯ã®ä¸Šæ‰‹ã•ï¼ˆå®‰å®šæ„Ÿã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã€ãƒ‘ãƒ¯ãƒ¼ã€å¾—ç‚¹åŠ›ï¼‰<br>
        <b>ã‚µãƒ¼ãƒ–</b>ï¼šã‚µãƒ¼ãƒ–ã®ä¸Šæ‰‹ã•ï¼ˆå®‰å®šæ„Ÿã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã€ãƒ‘ãƒ¯ãƒ¼ã€å¾—ç‚¹åŠ›ï¼‰<br>
        <b>é«˜ã•</b>ï¼šèº«é•·ã€ã‚¸ãƒ£ãƒ³ãƒ—ã€åˆ°é”ã™ã‚‹é«˜ã•ã‚’ä½¿ã„ã“ãªã›ã¦ã„ã‚‹ã‹<br>
      </div>
      <a href="https://w-yoyaku-fujimi-city.seagulloffice.com/stagia/reserve/gin_menu">å¯Œå£«è¦‹å¸‚ç·åˆä½“è‚²é¤¨äºˆç´„ãƒšãƒ¼ã‚¸</a>
      <p style="color: darkgrey;font-size: xx-small;">ç”»åƒã¯HADOãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒšãƒ¼ã‚¸(ä¾‹:D
        https://hado-official.com/wp-content/uploads/wachawacha_d.jpg) <- ãªã‘ã‚Œã°Twitterã®æŠ•ç¨¿ã‹ã‚‰ï¼ˆä¾‹: ãªãŠ
          https://pbs.twimg.com/media/FtVMRHkacAI1G07?format=jpgï¼‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å…ˆã‹ã‚‰ç”»åƒãŒæ¶ˆãˆãŸã‚‰ã“ã¡ã‚‰ã®ãƒšãƒ¼ã‚¸ã®ç”»åƒã‚‚æ¶ˆãˆã¾ã™</p>
    </div>
    <div class="card-columns"></div>
    <div class="col dropdown">
      ä¸¦ã³æ›¿ãˆ
      <button type="button" id="callOptionDropDown" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"
        aria-haspopup="true" aria-expanded="false">ä¸¦ã³æ›¿ãˆ</button>
      <ul class="dropdown-menu" id="sortDropDown">
        <li><button class="dropdown-item" value="1">ãƒ¬ã‚·ãƒ¼ãƒ–</button></li>
        <li><button class="dropdown-item" value="2">ãƒˆã‚¹</button></li>
        <li><button class="dropdown-item" value="3">ã‚¹ãƒ‘ã‚¤ã‚¯</button></li>
        <li><button class="dropdown-item" value="4">ã‚µãƒ¼ãƒ–</button></li>
        <li><button class="dropdown-item" value="5">é«˜ã•</button></li>
        <li><button class="dropdown-item" value="6">åˆè¨ˆ</button></li>
      </ul>
    </div>
    </div>
    <div class="row" id="output"></div>
  </div>

  <!-- Bootstrap JavaScript -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="js/util.js"></script>
  <script>
    var loadData;
    var sortValue = 0;
    function init() {
      createHeader();
      var xhr = new XMLHttpRequest();
      xhr.open('GET', 'https://docs.google.com/spreadsheets/d/1ntRLq7cuneQYNULNtV8tq7QQlk3DmQcuuuOmVXAlCsc/export?format=csv', true);
      xhr.onreadystatechange = function () {
        if (this.readyState === 4 && this.status === 200) {
          loadData = this.responseText.split("\r\n");
          loadData.splice(0, 1);
          console.log("done")
          creatContents()

        };
      };
      xhr.send();
    }
    init();
    setFunc()

    var temp = '<div class="card"><img src="{img}" class="card-img-top cover" style="padding:5px;";><div class="card-body"><h5 class="card-title"><b>{name}ã€{åˆè¨ˆ}ã€‘</b></h5><p class="card-text">{info}</p><table class="table table-sm"><tbody><tr><th scope="row">ãƒ¬ã‚·ãƒ¼ãƒ–</th><td>{ãƒ¬ã‚·ãƒ¼ãƒ–}</td></tr><tr><th scope="row">ãƒˆã‚¹</th><td>{ãƒˆã‚¹}</td></tr><tr><th scope="row">ã‚¹ãƒ‘ã‚¤ã‚¯</th><td>{ã‚¹ãƒ‘ã‚¤ã‚¯}</td></tr><tr><th scope="row">ã‚µãƒ¼ãƒ–</th><td>{ã‚µãƒ¼ãƒ–}</td></tr><tr><th scope="row" style="width: 40%">é«˜ã•</th><td>{é«˜ã•}</td></tr></tbody></table><p style = "color:lightgray;font-size:8px">{date}</p></div></div>';
    function parceStar(num) {
      var ret = num + " ";
      for (let index = 0; index < num; index++) {
        ret += "â˜…";
      }
      return ret;
    }

    function setFunc() {
      $('.dropdown-menu .dropdown-item').click(function () {
        var visibleItem = $('.dropdown-toggle', $(this).closest('.dropdown'));
        visibleItem.text($(this).text());
        visibleItem.attr('value', $(this).attr('value'));
        _recordChildList = [];
        sortValue = Number($(this).attr('value'));
        creatContents();
      });
    }

    function creatContents() {
      output.innerHTML = "";
      /** ç¾åœ¨ã®Dateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ */
      var d = new Date();
      /** æ—¥ä»˜ã‚’æ–‡å­—åˆ—ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã™ã‚‹ */
      var formatted = `
        ${d.getFullYear()}-${(d.getMonth() + 1).toString().padStart(2, '0')}-${d.getDate().toString().padStart(2, '0')}
        `.replace(/\n|\r/g, '');
      loadData = loadData.sort((a, b) => b.split(",")[sortValue] - a.split(",")[sortValue]);
      for (let index = 0; index < loadData.length; index++) {
        var mData = loadData[index].split(",");
        var record = document.createElement("div");
        record.className = "col-md-2 mb-2";
        record.innerHTML = temp.replace(/{name}/g, mData[0])
        record.style.padding = "5px";
        record.innerHTML = record.innerHTML.replace(/{ãƒ¬ã‚·ãƒ¼ãƒ–}/g, parceStar(mData[1]));
        record.innerHTML = record.innerHTML.replace(/{ãƒˆã‚¹}/g, parceStar(mData[2]));
        record.innerHTML = record.innerHTML.replace(/{ã‚¹ãƒ‘ã‚¤ã‚¯}/g, parceStar(mData[3]));
        record.innerHTML = record.innerHTML.replace(/{ã‚µãƒ¼ãƒ–}/g, parceStar(mData[4]));
        record.innerHTML = record.innerHTML.replace(/{é«˜ã•}/g, parceStar(mData[5]));
        record.innerHTML = record.innerHTML.replace(/{åˆè¨ˆ}/g, mData[6]);
        record.innerHTML = record.innerHTML.replace(/{info}/g, mData[7])
        record.innerHTML = record.innerHTML.replace(/{img}/g, mData[8])
        record.innerHTML = record.innerHTML.replace(/{date}/g, "Ranking:"+(index +1)+"ã€€ViewDate:"+formatted)
        output.appendChild(record);
      }
    }
  </script>
</body>

</html>